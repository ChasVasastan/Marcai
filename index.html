<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Marcai: Marcai</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="marcai.png"/></td>
  <td id="projectalign">
   <div id="projectname">Marcai
   </div>
   <div id="projectbrief">A physical music box that can play AI generated music</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Marcai </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a>A physical music box that is designed to collect data via sensors on a <a href="https://github.com/ChasVasastan/SensorsArduino">arduino</a> which then sends the data to an raspberry pi pico w,which calls a API connected to an AI music generator that gets fed different parameters from the box. Ultimately the song is saved and streamed from a azure databse and played via the pico.</p>
<p>In its current form, the project does not actually make API calls which generate songs, but instead accesses a database which has pre-generated songs. The songs have different tags on them which are used when making a call with the sensor data.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features</h1>
<ul>
<li><b>Media Playback Management</b>: Play, stop, next and previous are functions used to navigate the media library or API calls with the appropriate sensory data.</li>
<li><b>Media</b>: Plays AI generated songs and pictures corresponding to the media.</li>
<li><b>Access point</b>: Set up the device as a wifi access point for intial configuration.</li>
<li><b><a class="el" href="classWifi.html">Wifi</a> Configuration</b>: Configure wifi settings through a web interface and store credentials in the flash memory.</li>
<li><b>Button Controls</b>: Use of physical buttons to control media playback.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
TODO</h1>
<ul>
<li><b>Implement A Music Generation API</b>: Change the API call to access a real music generation service.</li>
<li><b>Enchance Web Interface</b>: Create a visually more appealing web interface.</li>
<li><b>Improve Error Handling</b>: Add error handling which manages edge cases i.e for the https connection.</li>
<li><b>Create extensions</b>: Create extensions which affect the API call to the AI Music generation service.</li>
<li><b>Expand Hardware Support</b>: Extend the support for more sensors and other tools which improve the product.</li>
<li><b>User Profiles</b>: Enable the user to save different generated songs as a preference for different sensory keywords.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Table of Contents</h1>
<ul>
<li>Features</li>
<li><a class="el" href="todo.html">TODO</a></li>
<li>Hardware Requirements<ul>
<li>Board Setup</li>
</ul>
</li>
<li>Software Requirements</li>
<li>Installation</li>
<li>Usage<ul>
<li>Connecting the Unit to the Internet</li>
<li>Media Playback</li>
</ul>
</li>
<li>Contributing</li>
<li>License</li>
<li>Acknowledgements</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Hardware Requirements</h1>
<ul>
<li>Raspberry Pi Pico w</li>
<li>4 buttons for physical control</li>
<li>DAC for mono sound</li>
<li>Speaker 8ohm 3W</li>
<li>1.3'' LCD <a class="el" href="classScreen.html">Screen(ST7789)</a> on a breakout</li>
<li>Misc things such as cables, resistors etc.</li>
</ul>
<p>See the <a href="https://github.com/ChasVasastan/SensorsArduino">arduino</a> repository for the sensors.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Board Setup</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function   </th><th class="markdownTableHeadNone">PicoW Pin   </th><th class="markdownTableHeadNone">Arduino Pin    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UART TX   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">UART RX   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DHT Data   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">I2C SDA   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SDA/A4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">I2C SCL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SCL/A5    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">BCLK   </td><td class="markdownTableBodyNone">26   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LRC   </td><td class="markdownTableBodyNone">27   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DIN   </td><td class="markdownTableBodyNone">28   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<h1><a class="anchor" id="autotoc_md6"></a>
Software Requirements</h1>
<ul>
<li>Pico SDK</li>
<li>C++ complier</li>
<li>Build tools apropriate for development on the rp2040 board</li>
</ul>
<p>Majority of the libraries are intergrated into the project</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Features</h1>
<ul>
<li><b>Media Playback Management</b>: Play, stop, skip, and navigate through your media library.</li>
<li><b>Wi-Fi Configuration</b>: Configure Wi-Fi settings through a web interface and store credentials in flash memory.</li>
<li><b>Access Point Mode</b>: Set up the device as a Wi-Fi access point for initial configuration.</li>
<li><b>Button Controls</b>: Use physical buttons to control media playback.</li>
</ul>
<ol type="1">
<li><b>Clone the repository</b>: <div class="fragment"><div class="line">git clone https://github.com/ChasVasastan/Marcai.git</div>
<div class="line">cd Marcai</div>
</div><!-- fragment --></li>
<li><b>Initialize and update submodules</b> (if any): <div class="fragment"><div class="line">git submodule update --init --recursive</div>
</div><!-- fragment --></li>
<li><b>Set up the Pico SDK</b>: Follow the <a href="https://github.com/raspberrypi/pico-sdk">Pico SDK setup instructions</a> to install and configure the SDK.</li>
<li><b>Build the project</b>: <div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --></li>
<li><p class="startli"><b>Flash the firmware</b>: After this, there is a .uf2 file in the build directory that you copy to the Raspberry Pi Pico w.</p>
<p class="startli">Optionally if <a href="https://github.com/raspberrypi/picotool">picotool</a> is installed, build target marcai_flash to flash the device.</p>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md8"></a>
Usage</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
Connecting the unit to the internet</h2>
<p>When you run the project on your pico w it will start in AP-mode, via your wifi manager on your OS select the network (Marcai) and enter the ipv4 manually (how you do this could vary, depending on your manager). As we do not run a DHCP server, please just connect one unit.</p>
<p>Data to be entered on the users side. </p><div class="fragment"><div class="line">IP:                 169, 254, 141, 158</div>
<div class="line">Netmask(24 bit):    255, 255, 255, 0</div>
<div class="line">Gateway:            169, 254, 141, 158</div>
</div><!-- fragment --><p>Once the data is entered, try to connect (SSID: Marcai, PASS: chas5678) and you should connected to the pico w. Now, open your browser of choice and enter <a href="http://169.254.141.158">http://169.254.141.158</a>, be certain that your browser does not upgrade the link to a https connection, as it most likely wont connect then.</p>
<p>On the website you enter the name and password of the desired wifi connection to join and hit "Submit", and the unit should change from AP to STA mode and connect to your selected wifi.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Media Playback</h2>
<ul>
<li><b>Control Buttons</b>:<ul>
<li>Button 1: Play</li>
<li>Button 2: Stop</li>
<li>Button 3: Next Track</li>
<li>Button 4: Previous Track</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Contributing</h1>
<p>TBD</p>
<h1><a class="anchor" id="autotoc_md12"></a>
License</h1>
<p>This project is licensed under the Apache 2.0 License. See the [LICENSE](LICENSE) file for details.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Acknowledgements</h1>
<ul>
<li><a href="https://www.raspberrypi.org/">Raspberry Pi</a> for the Pico and SDK</li>
<li><a href="https://savannah.nongnu.org/projects/lwip/">lwIP</a> for the lightweight TCP/IP stack</li>
<li><a href="https://github.com/Mbed-TLS/mbedtls">mbedtls</a> for the flexible TLS connection</li>
<li><a href="https://github.com/raspberrypi/pico-sdk">Pico SDK</a> for development support</li>
<li><a href="https://github.com/lxfontes/ezxml">ezxml</a> for xml handling</li>
<li><a href="https://libspng.org/">libspng</a> for help with decoding png</li>
<li><a href="https://github.com/richgel999/miniz">miniz</a> for compression</li>
<li><a href="https://github.com/ikjordan/picomp3lib">picomp3lib</a> for help of decoding mp3 </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
